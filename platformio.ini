; PlatformIO Project Configuration File
;
; Please visit documentation for options and examples
; https://docs.platformio.org/page/projectconf.html
[platformio]
default_envs = debug

[env]
extra_scripts = pre:tools/platformio.git.py, pre:tools/platformio.patch.py, tools/platformio.cargo.py, post:tools/git-ai-all
board = esp32-c3-devkitm-1
platform = espressif32
framework = arduino
upload_speed = 921600
rust_lib = u701
rust_target = riscv32imc-esp-espidf
build_flags = -D USE_NIMBLE
monitor_port = /dev/tty.*
upload_port = /dev/tty.*
; upload_command = "espflash flash --monitor"

lib_deps =
    https://github.com/T-vK/ESP32-BLE-Keyboard.git
    h2zero/NimBLE-Arduino
    thijse/ArduinoLog

[env:ota]
upload_flags = --auth=11111111
upload_port = 192.168.4.1
upload_protocol = espota
extends = env:release

[env:debug]
build_type = debug
build_flags = ${env.build_flags} -Os

[env:release]
build_flags = ${env.build_flags} -Os -fuse-linker-plugin -Wl,--gc-sections
build_type = release
